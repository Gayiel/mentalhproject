(function(){ if(!/runTests=1/.test(location.search)) return; function log(m){ console.log('[MindFlowTest]', m);} function assert(n,c){ log(n+': '+(c?'PASS':'FAIL')); } window.addEventListener('DOMContentLoaded', ()=>{ try { assert('conversationCore loaded', !!window.conversationCore); const di=window._mfTest && window._mfTest.detectIntent; assert('detectIntent available', typeof di==='function'); if(di){ assert('intent anxiety', di('I feel so stressed lately')==='anxiety'); assert('intent sleep', di('My sleep has been terrible')==='sleep'); assert('intent relationship', di('I had an argument with my partner')==='relationship'); } setTimeout(()=>{ if(window._mfTest && typeof window._mfTest.handleSend==='function'){ window._mfTest.handleSend('I am feeling overwhelmed and stressed'); log('Sent simulated message to handleSend'); } else { log('handleSend not yet available for integration test'); } },1500); } catch(e){ log('Harness error: '+e.message); } });})();